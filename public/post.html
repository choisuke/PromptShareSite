<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<title>Post Prompt - Prompt Share</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container py-4">
<h2 class="mb-4">プロンプト投稿</h2>
<form id="form" class="mb-3">
  <div class="mb-3">
    <textarea id="ptext" class="form-control" placeholder="プロンプト" required></textarea>
  </div>
  <div class="mb-3">
    <select id="ptype" class="form-select">
      <option value="sales">営業</option>
      <option value="support">サポート</option>
      <option value="dev">開発</option>
    </select>
  </div>
  <div class="mb-3">
    <input id="psummary" class="form-control" placeholder="業務概要" required>
  </div>
  <div class="mb-3">
    <input id="presult" class="form-control" placeholder="得られる結果" required>
  </div>
  <button type="submit" class="btn btn-primary">登録</button>
  <a href="/prompts" class="btn btn-secondary ms-2">戻る</a>
</form>
<script>
const userId=localStorage.getItem('userId');
if(!userId){location.href='/';}

document.getElementById('form').addEventListener('submit',async e=>{
  e.preventDefault();
  const p={
    text:document.getElementById('ptext').value,
    businessType:document.getElementById('ptype').value,
    summary:document.getElementById('psummary').value,
    result:document.getElementById('presult').value,
    userId,
    createdAt:new Date().toISOString(),
    likes:0,
    comments:[]
  };
  await fetch('/api/prompts',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(p)});
  location.href='/prompts';
});
</script>
</body>
</html>
